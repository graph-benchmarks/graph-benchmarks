kind: ConfigMap
apiVersion: v1
metadata:
  name: graphscope-bench
  namespace: default
data:
  config.yaml: |
    config:
      ids: "12"
      algos: "bfs"
      log_file: /attached/log
      nodes: 2
    postgres:
      host: postgres
      port: 5432
      db: postgres
      user: postgres
      ps: graph_benchmarks
    platform:
      host: coordinator-service-graphscope
      port: 59001
    dataset:
      vertex: /attached/datagen-7_5-fb.v
      edges: /attached/datagen-7_5-fb.e
      name: datagen-7_5-fb
      weights: false
      directed: false
---
apiVersion: v1
kind: Pod
metadata:
  name: graphscope-bench
  namespace: default
spec:
  serviceAccount: admin-user
  containers:
    - name: graphscope-bench
      command: ["sh", "-c", "while { sleep 3600; } do :; done"]
      image: 192.168.121.181:30000/benches/graphscope:latest
      volumeMounts:
        - name: bench-storage
          mountPath: /attached
        - name: scratch
          mountPath: /scratch
        - name: graphscope-bench
          mountPath: /cfg
          readOnly: true
      ports:
        - containerPort: 5000
  volumes:
    - name: bench-storage
      nfs:
        path: /bench-storage
        server: 10.43.230.0
        readOnly: false
    - name: scratch
      nfs:
        path: /scratch
        server: 10.43.230.0
        readOnly: false
    - name: graphscope-bench
      configMap:
        name: graphscope-bench
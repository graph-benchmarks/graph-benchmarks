apiVersion: v1
kind: Pod
metadata:
  name: dataset-copy
  namespace: default
spec:
  containers:
    - name: dataset-copy
      image: 192.168.121.225:30000/system/rsync:latest
      volumeMounts:
        - name: benchmark-pvc
          mountPath: /attached
      ports:
        - containerPort: 5000
  volumes:
    - name: benchmark-pvc
      persistentVolumeClaim:
        claimName: benchmark-pvc
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: graphscope-bench
  namespace: default
data:
  config.yaml: |
    config:
      id: 12
      algo: sssp
      log_file: /attached/log
    postgres:
      host: postgres
      port: 30002
      db: postgres
      user: postgres
      ps: graph_benchmarks
    platform:
      host: coordinator-service-graphscope:{}
      port: 59001
    dataset:
      vertex: /attached/test-sssp-undirected.v
      edges: /attached/test-sssp-undirected.e
      name: test-sssp-undirected
---
apiVersion: v1
kind: Pod
metadata:
  name: graphscope-bench
  namespace: default
spec:
  containers:
    - name: graphscope-bench
      args:
        - /cfg/config.yaml
      image: 192.168.121.225:30000/benches/graphscope:latest
      volumeMounts:
        - name: benchmark-pvc
          mountPath: /attached
        - name: graphscope-bench
          mountPath: /cfg
          readOnly: true
      ports:
        - containerPort: 5000
  volumes:
    - name: benchmark-pvc
      persistentVolumeClaim:
        claimName: benchmark-pvc
    - name: graphscope-bench
      configMap:
        name: graphscope-bench